(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9eeeb60e"],{"0c0f":function(e,a,t){"use strict";t.r(a);var l=t("f2bf"),c=t("d009"),n=t("ea7a"),s=t("eb54");Object(l.pushScopeId)("data-v-196d3eb6");const o={key:0,class:"materialData"},r=Object(l.createElementVNode)("div",{class:"materialData-header"}," 材质编辑 ",-1),m={class:"selImg"},i=["src"],u={class:"materialBox"},d={class:"selImg"},p=["src"],b={class:"materialBox"},O={class:"selImg"},f=["src"],j={class:"materialBox"},V={class:"selImg"},h=["src"],g={class:"materialBox"},N={class:"selImg"},v=["src"],w={class:"materialBox"},x={class:"selImg"},M=["src"];Object(l.popScopeId)();var y=Object(l.defineComponent)({setup(e,{expose:a}){const t=Object(l.reactive)({name:"",baseColor:"",baseMap:"./favicon.ico",alpha:0,roughnessMap:"./favicon.ico",roughness:0,metalnessMap:"./favicon.ico",metalness:0,aoMap:"./favicon.ico",aoMapIntensity:0,normalMap:"./favicon.ico",normalScale:0,displacementMap:"./favicon.ico",displacementScale:"./favicon.ico",equaScale:!0,uScale:1,vScale:1,rotate:1,equaOffset:!0,xOffset:1,yOffset:1}),y=Object(l.ref)(!1);let C,I,S;const E=(e,a)=>{e=e.srcElement;var l=URL.createObjectURL(e.files[0]);switch(a){case 0:t.baseMap=l;break;case 1:t.roughnessMap=l;break;case 2:t.metalnessMap=l;break;case 3:t.aoMap=l;break;case 4:t.normalMap=l;break;case 5:t.displacementMap=l}n.a.changeMaterialMap(I.mesh,a,l)},U=e=>{1==e?(C.transparent=!1,C.side=s.FrontSide):(C.transparent=!0,C.side=s.DoubleSide),C.opacity=e,n.a.saveMaterialData(I.mesh,I.id),c.a.scene.enableRender()},_=e=>{C.roughness=e,n.a.saveMaterialData(I.mesh,I.id),c.a.scene.enableRender()},D=e=>{C.metalness=e,n.a.saveMaterialData(I.mesh,I.id),c.a.scene.enableRender()},k=e=>{C.aoMapIntensity=e,n.a.saveMaterialData(I.mesh,I.id),c.a.scene.enableRender()},z=e=>{C.normalMap&&(C.normalScale=new s.Vector2(e,-e),c.a.scene.enableRender()),n.a.saveMaterialData(I.mesh,I.id)},q=e=>{var a;return null==e||null==e.image?"no.png":((a=S=S||document.createElement("canvas")).width=32,a.height=32,a.getContext("2d").drawImage(e.image,0,0,a.width,a.height),a.toDataURL(e.userData.mimeType))},B=(e,a)=>{C&&(t.equaScale&&(e?t.vScale=a:t.uScale=a),n.a.changeScale(e,a,C,t.equaScale),n.a.saveMaterialData(I.mesh,I.id))},R=e=>{C&&n.a.changeRotate(e,C),n.a.saveMaterialData(I.mesh,I.id)},L=(e,a)=>{C&&(t.equaOffset&&(e?t.yOffset=a:t.xOffset=a),n.a.changeOffset(e,a,C,t.equaOffset)),n.a.saveMaterialData(I.mesh,I.id)};return a({dialogVisible:y,showMeshMaterialData:e=>{var a=e.mesh.material;I=e,C=a,t.name=a.name,t.baseMap=q(a.map),a.transparent?t.alpha=a.opacity:t.alpha=1,t.roughness=a.roughness,t.roughnessMap=q(a.roughnessMap),t.metalness=a.metalness,t.metalnessMap=q(a.metalnessMap),t.normalMap=q(a.normalMap),t.aoMap=q(a.aoMap),t.aoMapIntensity=a.aoMapIntensity,t.displacementMap=q(a.displacementMap),t.normalScale=a.normalScale.x,a.map&&(t.uScale=a.map.repeat.x,t.vScale=a.map.repeat.y,t.rotate=180*a.map.rotation/Math.PI,t.xOffset=a.map.offset.x,t.yOffset=a.map.offset.y),e=c.a.getElementByID(e.id);e&&(t.baseColor="#"+a.color.getHexString())}}),(e,a)=>{const c=Object(l.resolveComponent)("el-input"),s=Object(l.resolveComponent)("el-form-item"),S=Object(l.resolveComponent)("el-color-picker"),q=Object(l.resolveComponent)("el-slider"),J=Object(l.resolveComponent)("el-switch");var F=Object(l.resolveComponent)("el-form");return y.value?(Object(l.openBlock)(),Object(l.createElementBlock)("div",o,[r,Object(l.createVNode)(F,{size:"small","label-position":"left","label-width":"100px",model:Object(l.unref)(t),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(s,{label:"材质名称"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(c,{modelValue:Object(l.unref)(t).name,"onUpdate:modelValue":a[0]||(a[0]=e=>Object(l.unref)(t).name=e)},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(s,{label:"基础颜色"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(S,{modelValue:Object(l.unref)(t).baseColor,"onUpdate:modelValue":a[1]||(a[1]=e=>Object(l.unref)(t).baseColor=e),onChange:a[2]||(a[2]=e=>{return a=Object(l.unref)(t).baseColor,C&&n.a.changeBaseColor(a,C),void n.a.saveMaterialData(I.mesh,I.id);var a})},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(s,{label:"基础贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",m,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).baseMap,class:"myImg"},null,8,i),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[3]||(a[3]=e=>E(e,0))},null,32)])]),_:1}),Object(l.createVNode)(s,{label:"透明度"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).alpha,"onUpdate:modelValue":a[4]||(a[4]=e=>Object(l.unref)(t).alpha=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:U,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])]),_:1}),Object(l.createVNode)(s,{label:"粗糙度贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",u,[Object(l.createElementVNode)("div",d,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).roughnessMap,class:"myImg"},null,8,p),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[5]||(a[5]=e=>E(e,1))},null,32)]),Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).roughness,"onUpdate:modelValue":a[6]||(a[6]=e=>Object(l.unref)(t).roughness=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:_,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l.createVNode)(s,{label:"金属度贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",b,[Object(l.createElementVNode)("div",O,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).metalnessMap,class:"myImg"},null,8,f),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[7]||(a[7]=e=>E(e,2))},null,32)]),Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).metalness,"onUpdate:modelValue":a[8]||(a[8]=e=>Object(l.unref)(t).metalness=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:D,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l.createVNode)(s,{label:"遮蔽贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",j,[Object(l.createElementVNode)("div",V,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).aoMap,class:"myImg"},null,8,h),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[9]||(a[9]=e=>E(e,3))},null,32)]),Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).aoMapIntensity,"onUpdate:modelValue":a[10]||(a[10]=e=>Object(l.unref)(t).aoMapIntensity=e),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:k},null,8,["modelValue","step"])])]),_:1}),Object(l.createVNode)(s,{label:"法向贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",g,[Object(l.createElementVNode)("div",N,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).normalMap,class:"myImg"},null,8,v),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[11]||(a[11]=e=>E(e,4))},null,32)]),Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).normalScale,"onUpdate:modelValue":a[12]||(a[12]=e=>Object(l.unref)(t).normalScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:z},null,8,["modelValue","step"])])]),_:1}),Object(l.createVNode)(s,{label:"置换贴图"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",w,[Object(l.createElementVNode)("div",x,[Object(l.createElementVNode)("img",{src:Object(l.unref)(t).displacementMap,class:"myImg"},null,8,M),Object(l.createElementVNode)("input",{type:"file",id:"file-input",accept:"image/*",onChange:a[13]||(a[13]=e=>E(e,5))},null,32)]),Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).displacementScale,"onUpdate:modelValue":a[14]||(a[14]=e=>Object(l.unref)(t).displacementScale=e),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l.createVNode)(s,{label:"缩放"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(J,{modelValue:Object(l.unref)(t).equaScale,"onUpdate:modelValue":a[15]||(a[15]=e=>Object(l.unref)(t).equaScale=e),"active-text":"等比缩放"},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(s,{label:"U"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).uScale,"onUpdate:modelValue":a[16]||(a[16]=e=>Object(l.unref)(t).uScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:a[17]||(a[17]=e=>B(!0,Object(l.unref)(t).uScale))},null,8,["modelValue","step"])]),_:1}),Object(l.createVNode)(s,{label:"V"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).vScale,"onUpdate:modelValue":a[18]||(a[18]=e=>Object(l.unref)(t).vScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:a[19]||(a[19]=e=>B(!1,Object(l.unref)(t).vScale))},null,8,["modelValue","step"])]),_:1}),Object(l.createVNode)(s,{label:"位置偏移"}),Object(l.createVNode)(s,{label:"旋转"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).rotate,"onUpdate:modelValue":a[20]||(a[20]=e=>Object(l.unref)(t).rotate=e),size:"small",min:0,max:360,step:.1,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:R},null,8,["modelValue","step"])]),_:1}),Object(l.createVNode)(s,{label:"偏移"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(J,{modelValue:Object(l.unref)(t).equaOffset,"onUpdate:modelValue":a[21]||(a[21]=e=>Object(l.unref)(t).equaOffset=e),"active-text":"等比偏移"},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(s,{label:"横向偏移"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).xOffset,"onUpdate:modelValue":a[22]||(a[22]=e=>Object(l.unref)(t).xOffset=e),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:a[23]||(a[23]=e=>L(!0,Object(l.unref)(t).xOffset))},null,8,["modelValue","step"])]),_:1}),Object(l.createVNode)(s,{label:"纵向偏移"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(q,{modelValue:Object(l.unref)(t).yOffset,"onUpdate:modelValue":a[24]||(a[24]=e=>Object(l.unref)(t).yOffset=e),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:a[25]||(a[25]=e=>L(!1,Object(l.unref)(t).yOffset))},null,8,["modelValue","step"])]),_:1})]),_:1},8,["model"])])):Object(l.createCommentVNode)("",!0)}}}),C=(t("536f"),t("6b0d"));t=t.n(C);a.default=t()(y,[["__scopeId","data-v-196d3eb6"]])},"536f":function(e,a,t){"use strict";t("c170")},c170:function(e,a,t){}}]);