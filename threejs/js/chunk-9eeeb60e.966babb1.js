(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9eeeb60e"],{"0c0f":function(e,t,a){"use strict";a.r(t);var l=a("f2bf"),c=a("d009"),n=a("ea7a"),s=a("eb54");Object(l["pushScopeId"])("data-v-196d3eb6");const o={key:0,class:"materialData"},r=Object(l["createElementVNode"])("div",{class:"materialData-header"}," 材质编辑 ",-1),m={class:"selImg"},i=["src"],u={class:"materialBox"},d={class:"selImg"},p=["src"],b={class:"materialBox"},O={class:"selImg"},f=["src"],j={class:"materialBox"},V={class:"selImg"},h=["src"],g={class:"materialBox"},N={class:"selImg"},w=["src"],x={class:"materialBox"},v={class:"selImg"},M=["src"];Object(l["popScopeId"])();var y=Object(l["defineComponent"])({setup(e,{expose:t}){const a=Object(l["reactive"])({name:"",baseColor:"",baseMap:"./favicon.ico",alpha:0,roughnessMap:"./favicon.ico",roughness:0,metalnessMap:"./favicon.ico",metalness:0,aoMap:"./favicon.ico",aoMapIntensity:0,normalMap:"./favicon.ico",normalScale:0,displacementMap:"./favicon.ico",displacementScale:"./favicon.ico",equaScale:!0,uScale:1,vScale:1,rotate:1,equaOffset:!0,xOffset:1,yOffset:1}),y=Object(l["ref"])(!1);let C,I,S;const E=e=>{let t=e.mesh.material;I=e,C=t,a.name=t.name,a.baseMap=R(t.map),t.transparent?a.alpha=t.opacity:a.alpha=1,a.roughness=t.roughness,a.roughnessMap=R(t.roughnessMap),a.metalness=t.metalness,a.metalnessMap=R(t.metalnessMap),a.normalMap=R(t.normalMap),a.aoMap=R(t.aoMap),a.aoMapIntensity=t.aoMapIntensity,a.displacementMap=R(t.displacementMap),a.normalScale=t.normalScale.x,t.map&&(a.uScale=t.map.repeat.x,a.vScale=t.map.repeat.y,a.rotate=180*t.map.rotation/Math.PI,a.xOffset=t.map.offset.x,a.yOffset=t.map.offset.y);let l=c["a"].getElementByID(e.id);l&&(a.baseColor="#"+t.color.getHexString())},U=e=>{C&&n["a"].changeBaseColor(e,C),n["a"].saveMaterialData(I.mesh,I.id)},_=(e,t)=>{let l=e.srcElement,c=URL.createObjectURL(l.files[0]);switch(t){case 0:a.baseMap=c;break;case 1:a.roughnessMap=c;break;case 2:a.metalnessMap=c;break;case 3:a.aoMap=c;break;case 4:a.normalMap=c;break;case 5:a.displacementMap=c;break}n["a"].changeMaterialMap(I.mesh,t,c)},D=e=>{1==e?(C.transparent=!1,C.side=s["FrontSide"]):(C.transparent=!0,C.side=s["DoubleSide"]),C.opacity=e,n["a"].saveMaterialData(I.mesh,I.id),c["a"].scene.enableRender()},k=e=>{C.roughness=e,n["a"].saveMaterialData(I.mesh,I.id),c["a"].scene.enableRender()},z=e=>{C.metalness=e,n["a"].saveMaterialData(I.mesh,I.id),c["a"].scene.enableRender()},q=e=>{C.aoMapIntensity=e,n["a"].saveMaterialData(I.mesh,I.id),c["a"].scene.enableRender()},B=e=>{C.normalMap&&(C.normalScale=new s["Vector2"](e,-e),c["a"].scene.enableRender()),n["a"].saveMaterialData(I.mesh,I.id)},R=e=>{if(null==e||null==e.image)return"no.png";const t=S=S||document.createElement("canvas");t.width=32,t.height=32;const a=t.getContext("2d");return a.drawImage(e.image,0,0,t.width,t.height),t.toDataURL(e.userData.mimeType)},L=(e,t)=>{C&&(a.equaScale&&(e?a.vScale=t:a.uScale=t),n["a"].changeScale(e,t,C,a.equaScale),n["a"].saveMaterialData(I.mesh,I.id))},J=e=>{C&&n["a"].changeRotate(e,C),n["a"].saveMaterialData(I.mesh,I.id)},F=(e,t)=>{C&&(a.equaOffset&&(e?a.yOffset=t:a.xOffset=t),n["a"].changeOffset(e,t,C,a.equaOffset)),n["a"].saveMaterialData(I.mesh,I.id)};return t({dialogVisible:y,showMeshMaterialData:E}),(e,t)=>{const c=Object(l["resolveComponent"])("el-input"),n=Object(l["resolveComponent"])("el-form-item"),s=Object(l["resolveComponent"])("el-color-picker"),C=Object(l["resolveComponent"])("el-slider"),I=Object(l["resolveComponent"])("el-switch"),S=Object(l["resolveComponent"])("el-form");return y.value?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o,[r,Object(l["createVNode"])(S,{size:"small","label-position":"left","label-width":"100px",model:Object(l["unref"])(a),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{label:"材质名称"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(c,{modelValue:Object(l["unref"])(a).name,"onUpdate:modelValue":t[0]||(t[0]=e=>Object(l["unref"])(a).name=e)},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(n,{label:"基础颜色"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{modelValue:Object(l["unref"])(a).baseColor,"onUpdate:modelValue":t[1]||(t[1]=e=>Object(l["unref"])(a).baseColor=e),onChange:t[2]||(t[2]=e=>U(Object(l["unref"])(a).baseColor))},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(n,{label:"基础贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",m,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).baseMap,class:"myImg"},null,8,i),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[3]||(t[3]=e=>_(e,0))},null,32)])]),_:1}),Object(l["createVNode"])(n,{label:"透明度"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).alpha,"onUpdate:modelValue":t[4]||(t[4]=e=>Object(l["unref"])(a).alpha=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:D,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])]),_:1}),Object(l["createVNode"])(n,{label:"粗糙度贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",u,[Object(l["createElementVNode"])("div",d,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).roughnessMap,class:"myImg"},null,8,p),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[5]||(t[5]=e=>_(e,1))},null,32)]),Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).roughness,"onUpdate:modelValue":t[6]||(t[6]=e=>Object(l["unref"])(a).roughness=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:k,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l["createVNode"])(n,{label:"金属度贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("div",O,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).metalnessMap,class:"myImg"},null,8,f),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[7]||(t[7]=e=>_(e,2))},null,32)]),Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).metalness,"onUpdate:modelValue":t[8]||(t[8]=e=>Object(l["unref"])(a).metalness=e),size:"small",min:0,max:1,step:.001,"show-input":!0,onInput:z,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l["createVNode"])(n,{label:"遮蔽贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",j,[Object(l["createElementVNode"])("div",V,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).aoMap,class:"myImg"},null,8,h),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[9]||(t[9]=e=>_(e,3))},null,32)]),Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).aoMapIntensity,"onUpdate:modelValue":t[10]||(t[10]=e=>Object(l["unref"])(a).aoMapIntensity=e),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:q},null,8,["modelValue","step"])])]),_:1}),Object(l["createVNode"])(n,{label:"法向贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",g,[Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).normalMap,class:"myImg"},null,8,w),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[11]||(t[11]=e=>_(e,4))},null,32)]),Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).normalScale,"onUpdate:modelValue":t[12]||(t[12]=e=>Object(l["unref"])(a).normalScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:B},null,8,["modelValue","step"])])]),_:1}),Object(l["createVNode"])(n,{label:"置换贴图"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",x,[Object(l["createElementVNode"])("div",v,[Object(l["createElementVNode"])("img",{src:Object(l["unref"])(a).displacementMap,class:"myImg"},null,8,M),Object(l["createElementVNode"])("input",{type:"file",id:"file-input",accept:"image/*",onChange:t[13]||(t[13]=e=>_(e,5))},null,32)]),Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).displacementScale,"onUpdate:modelValue":t[14]||(t[14]=e=>Object(l["unref"])(a).displacementScale=e),size:"small",min:0,max:1,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue","step"])])]),_:1}),Object(l["createVNode"])(n,{label:"缩放"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(I,{modelValue:Object(l["unref"])(a).equaScale,"onUpdate:modelValue":t[15]||(t[15]=e=>Object(l["unref"])(a).equaScale=e),"active-text":"等比缩放"},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(n,{label:"U"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).uScale,"onUpdate:modelValue":t[16]||(t[16]=e=>Object(l["unref"])(a).uScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:t[17]||(t[17]=e=>L(!0,Object(l["unref"])(a).uScale))},null,8,["modelValue","step"])]),_:1}),Object(l["createVNode"])(n,{label:"V"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).vScale,"onUpdate:modelValue":t[18]||(t[18]=e=>Object(l["unref"])(a).vScale=e),size:"small",min:-10,max:10,step:.001,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:t[19]||(t[19]=e=>L(!1,Object(l["unref"])(a).vScale))},null,8,["modelValue","step"])]),_:1}),Object(l["createVNode"])(n,{label:"位置偏移"}),Object(l["createVNode"])(n,{label:"旋转"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).rotate,"onUpdate:modelValue":t[20]||(t[20]=e=>Object(l["unref"])(a).rotate=e),size:"small",min:0,max:360,step:.1,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:J},null,8,["modelValue","step"])]),_:1}),Object(l["createVNode"])(n,{label:"偏移"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(I,{modelValue:Object(l["unref"])(a).equaOffset,"onUpdate:modelValue":t[21]||(t[21]=e=>Object(l["unref"])(a).equaOffset=e),"active-text":"等比偏移"},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(n,{label:"横向偏移"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).xOffset,"onUpdate:modelValue":t[22]||(t[22]=e=>Object(l["unref"])(a).xOffset=e),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:t[23]||(t[23]=e=>F(!0,Object(l["unref"])(a).xOffset))},null,8,["modelValue","step"])]),_:1}),Object(l["createVNode"])(n,{label:"纵向偏移"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{modelValue:Object(l["unref"])(a).yOffset,"onUpdate:modelValue":t[24]||(t[24]=e=>Object(l["unref"])(a).yOffset=e),size:"small",min:0,max:10,step:.01,"show-input":!0,"show-input-controls":!1,class:"my-slider",onInput:t[25]||(t[25]=e=>F(!1,Object(l["unref"])(a).yOffset))},null,8,["modelValue","step"])]),_:1})]),_:1},8,["model"])])):Object(l["createCommentVNode"])("",!0)}}}),C=(a("536f"),a("6b0d")),I=a.n(C);const S=I()(y,[["__scopeId","data-v-196d3eb6"]]);t["default"]=S},"536f":function(e,t,a){"use strict";a("c170")},c170:function(e,t,a){}}]);