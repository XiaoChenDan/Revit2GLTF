const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./HDRLib-BJO3AZKC.js","./index-Drk0v8yT.js","./index-BCiRsHgl.css","./HDRLib-Bj1DIL5o.css"])))=>i.map(i=>d[i]);
import{d as R,r as s,a as d,b as E,c as C,h as c,e as t,w as l,a5 as k,u as D,F as N,I as J,L as K,j as a,_ as Q,X as W,f as ee,t as te,Z as ne,o as le,a6 as ae,a7 as oe,Y as se,a8 as ie}from"./index-Drk0v8yT.js";const re={class:"demo-collapse"},ue=["src"],me=R({__name:"EnvironmentEdit",setup($,{expose:L}){const I=J(()=>K(()=>import("./HDRLib-BJO3AZKC.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),_=s(),g=s(["环境","灯光"]),r=s(""),x=s(),f=s(),h=s(),o=s(),i=s(),u=s(),w=s(),v=s(),b=s(),S=s(),z=s(!0),M=s(!1),y={aoPower:"aoPower",aoSmoothing:"aoSmoothing",aoMapGamma:"aoMapGamma",lightMapGamma:"lightMapGamma",lightMapSaturation:"lightMapSaturation",envPower:"envPower",roughnessPower:"roughnessPower",sunIntensity:"sunIntensity",mapContrast:"mapContrast",lightMapContrast:"lightMapContrast",smoothingPower:"smoothingPower",irradianceIntensity:"irradianceIntensity",radianceIntensity:"radianceIntensity"},G=()=>{var m,e;console.log("showEnvironmentData"),(m=a.scene.scene.environment)!=null&&m.userData.previewPath?r.value=(e=a.scene.scene.environment)==null?void 0:e.userData.previewPath:r.value="./no.png",i.value=a.scene.getEmviormentParameter("sunIntensity"),u.value=a.scene.getEmviormentParameter("smoothingPower"),S.value=a.scene.getEmviormentParameter("envPower"),w.value=a.scene.getEmviormentParameter("aoPower"),v.value=a.scene.getEmviormentParameter("aoSmoothing"),b.value=a.scene.getEmviormentParameter("radianceIntensity"),x.value="#"+a.scene.ambientLight.color.getHexString(),f.value=a.scene.ambientLight.intensity,o.value="#"+a.scene.directionalLight.color.getHexString(),h.value=a.scene.directionalLight.intensity,M.value=a.scene.showBackground,z.value=a.scene.showEnvironment},j=()=>{_.value.dialogVisible=!0},O=()=>{a.scene.showEnvironment=z.value},T=()=>{a.scene.showBackground=M.value},P=(m,e)=>{a.scene.setEmviormentParameter(m,e)};s(!1);const F=m=>{a.scene.ambientLight.color.set(m),a.scene.enableRender()},q=m=>{a.scene.ambientLight.intensity=m,console.log(a.scene.ambientLight.intensity),a.scene.enableRender()},X=m=>{a.scene.directionalLight.color.set(m),a.scene.enableRender()},Y=m=>{a.scene.directionalLight.intensity=m,a.scene.enableRender()};return L({showEnvironmentData:G}),(m,e)=>{const B=d("el-switch"),p=d("el-form-item"),V=d("el-slider"),U=d("el-form"),A=d("el-collapse-item"),H=d("el-color-picker"),Z=d("el-collapse");return E(),C(N,null,[c("div",re,[t(Z,{modelValue:g.value,"onUpdate:modelValue":e[21]||(e[21]=n=>g.value=n)},{default:l(()=>[t(A,{title:"环境",name:"环境"},{default:l(()=>[c("img",{class:"environmentImg",src:r.value,onClick:j},null,8,ue),t(U,{size:"small","label-position":"left","label-width":"100px",onSubmit:e[14]||(e[14]=k(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"30px","margin-bottom":"5px"}},{default:l(()=>[t(p,{label:"环境贴图"},{default:l(()=>[t(B,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=n=>z.value=n),onChange:O},null,8,["modelValue"])]),_:1}),t(p,{label:"显示天空盒"},{default:l(()=>[t(B,{modelValue:M.value,"onUpdate:modelValue":e[1]||(e[1]=n=>M.value=n),onChange:T},null,8,["modelValue"])]),_:1}),t(p,{label:"环境贴图强度"},{default:l(()=>[t(V,{size:"small",min:-10,max:10,step:.01,"show-input":!0,modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n),onInput:e[3]||(e[3]=n=>P(y.sunIntensity,i.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"环境贴图对比度"},{default:l(()=>[t(V,{size:"small",min:-10,max:10,step:.01,"show-input":!0,modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value=n),onInput:e[5]||(e[5]=n=>P(y.smoothingPower,u.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"环境贴图增强值"},{default:l(()=>[t(V,{size:"small",min:-20,max:20,step:.01,"show-input":!0,modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=n=>S.value=n),onInput:e[7]||(e[7]=n=>P(y.envPower,S.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"AO影响值"},{default:l(()=>[t(V,{size:"small",min:-5,max:5,step:.01,"show-input":!0,modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=n=>w.value=n),onInput:e[9]||(e[9]=n=>P(y.aoPower,w.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"AO平滑值"},{default:l(()=>[t(V,{size:"small",min:0,max:3,step:.01,"show-input":!0,modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=n=>v.value=n),onInput:e[11]||(e[11]=n=>P(y.aoSmoothing,v.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"环境幅度值"},{default:l(()=>[t(V,{size:"small",min:-50,max:50,step:.01,"show-input":!0,modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=n=>b.value=n),onInput:e[13]||(e[13]=n=>P(y.radianceIntensity,b.value)),"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A,{title:"灯光",name:"灯光"},{default:l(()=>[t(U,{size:"small","label-position":"left","label-width":"100px",onSubmit:e[17]||(e[17]=k(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:l(()=>[t(p,{label:"环境光光强度"},{default:l(()=>[t(V,{size:"small",min:0,max:10,step:.1,"show-input":!0,modelValue:f.value,"onUpdate:modelValue":e[15]||(e[15]=n=>f.value=n),onInput:q,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"环境光颜色"},{default:l(()=>[t(H,{modelValue:x.value,"onUpdate:modelValue":e[16]||(e[16]=n=>x.value=n),onActiveChange:F},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{size:"small","label-position":"left","label-width":"100px",onSubmit:e[20]||(e[20]=k(()=>{},["prevent"])),style:{"margin-left":"10px","margin-right":"10px","margin-top":"5px","margin-bottom":"5px"}},{default:l(()=>[t(p,{label:"直接光强度"},{default:l(()=>[t(V,{size:"small",min:0,max:10,step:.1,"show-input":!0,modelValue:h.value,"onUpdate:modelValue":e[18]||(e[18]=n=>h.value=n),onInput:Y,"show-input-controls":!1,class:"my-slider"},null,8,["modelValue"])]),_:1}),t(p,{label:"直接光基础颜色"},{default:l(()=>[t(H,{modelValue:o.value,"onUpdate:modelValue":e[19]||(e[19]=n=>o.value=n),onActiveChange:X},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(D(I),{ref_key:"HDRLibRef",ref:_},null,512)],64)}}}),de=Q(me,[["__scopeId","data-v-7b5ea6db"]]),pe={class:"material-list-wrapper"},ce={class:"material-list"},ge={class:"material-item-wp"},ve={class:"material-item"},_e={class:"preview-img-wrap"},fe=["alt","src","onDragend"],he=c("div",{class:"preview-img-cover"},null,-1),we={class:"title"},be={class:"pagination-container"},Ve=R({__name:"MaterialLib",setup($,{expose:L}){let I=[];const _=s([]);fetch("./pbr/pbr.json").then(o=>o.json()).then(o=>{if(o&&o.length>0)for(const i of o)i.previewUrl=i.path+i.previewUrl;I=o,g.value=o.length,x(1)});const g=s(0),r=W({address:"",name:"",pageIndex:1,pageSize:20}),x=o=>{r.pageIndex=o;let i=(r.pageIndex-1)*r.pageSize<0?0:(r.pageIndex-1)*r.pageSize,u=r.pageIndex*r.pageSize>g.value?g.value:r.pageIndex*r.pageSize;_.value=I.slice(i,u)},f=o=>{o.preventDefault()},h=(o,i)=>{o.preventDefault();let u=a.scene.raycaster.getIntersectMesh(o);u&&(console.log("替换材质id"+i.materialId),ne.changePBRMaterial(u.mesh,u.id,i))};return L({}),(o,i)=>{const u=d("el-scrollbar"),w=d("el-pagination");return E(),C("div",pe,[t(u,null,{default:l(()=>[c("div",ce,[(E(!0),C(N,null,ee(_.value,v=>(E(),C("div",{class:"material-item-container",key:v.materialId},[c("div",ge,[c("div",ve,[c("div",_e,[c("img",{class:"previewImg",alt:v.name,src:v.previewUrl,draggable:!0,onDrag:i[0]||(i[0]=b=>f(b)),onDragend:b=>h(b,v)},null,40,fe),he])])]),c("div",we,te(v.name),1)]))),128))])]),_:1}),c("div",be,[t(w,{layout:"prev, pager, next","current-page":r.pageIndex,"page-size":r.pageSize,total:g.value,onCurrentChange:x},null,8,["current-page","page-size","total"])])])}}}),Ie={key:0,class:"editMenu"},xe={class:"custom-tabs-label"},ye={class:"custom-tabs-label"},Le=R({__name:"MaterialEditMenu",setup($,{expose:L}){const I=s(!1),_=s("first"),g=s(),r=()=>{ie(()=>{g.value?g.value.showEnvironmentData():r()})};return le(()=>{}),L({dialogVisible:I,showEnvironmentlData:r}),(x,f)=>{const h=d("el-icon"),o=d("el-tooltip"),i=d("el-tab-pane"),u=d("el-tabs");return I.value?(E(),C("div",Ie,[t(u,{modelValue:_.value,"onUpdate:modelValue":f[0]||(f[0]=w=>_.value=w),type:"border-card","tab-position":"left"},{default:l(()=>[t(i,{name:"first"},{label:l(()=>[t(o,{effect:"dark",content:"灯光环境",placement:"right"},{default:l(()=>[c("span",xe,[t(h,null,{default:l(()=>[t(D(ae))]),_:1})])]),_:1})]),default:l(()=>[t(de,{ref_key:"environmentEditRef",ref:g},null,512)]),_:1}),t(i,{name:"second"},{label:l(()=>[t(o,{effect:"dark",content:"材质库",placement:"right"},{default:l(()=>[c("span",ye,[t(h,null,{default:l(()=>[t(D(oe))]),_:1})])]),_:1})]),default:l(()=>[t(Ve)]),_:1})]),_:1},8,["modelValue"])])):se("",!0)}}});export{Le as default};
